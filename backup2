function addTask() {
  const title = document.getElementById("task-title").value;
  const desc = document.getElementById("task-desc").value;
  const dueDate = document.getElementById("due-date").value;
  const priority = document.getElementById("priority").value;
  const project = document.getElementById("project").value;

  if (editingTask && tasks[editIndex]) {
    editTask(tasks[editIndex].id, title, desc, dueDate, priority, project);
    editingTask = false;
    addTaskModal.style.display = "none";
  } else {
    const id = tasks.length ? Math.max(...tasks.map((task) => task.id)) + 1 : 1;
    tasks.push(createTask(id, title, desc, dueDate, priority, project));
    displayTasks();
  }

  addTaskModal.style.display = "none";
  addTaskForm.reset();

  displayTasks();
  displayCompletedTasks();
}

///////////////////

function addTask() {
  const taskTitle = document.getElementById("task-title").value;
  const taskDescription = document.getElementById("task-desc").value;
  const dueDate = document.getElementById("due-date").value;
  const priority = document.getElementById("priority").value;
  const project = document.getElementById("project").value;

  let newTask;

  if (editingTask) {
    newTask = {
      ...tasks[editIndex],
      title: taskTitle,
      description: taskDescription,
      dueDate: dueDate,
      priority: priority,
      project: project,
    };
    tasks[editIndex] = newTask;
  } else {
    newTask = createTask(
      tasks.length + 1,
      taskTitle,
      taskDescription,
      dueDate,
      priority,
      project
    );
    tasks.push(newTask);
  }

  displayTasks();
  displayCompletedTasks();

  console.log(tasks);

  // Hide the modal
  document.getElementById("add-task-modal").style.display = "none";
  // Reset form
  document.getElementById("add-task-form").reset();

  info.innerText = JSON.stringify(tasks);
}
